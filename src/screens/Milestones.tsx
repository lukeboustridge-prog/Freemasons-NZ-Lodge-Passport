import React,{useState}from"react";import{SectionCard}from"../components/SectionCard";export type Milestone={id:string;date:string;type:"Initiation"|"Passing"|"Raising"|"Installation"|"50 Year"|"60 Year"|"Other";notes?:string;};export function MilestonesScreen({milestones,onSave,onUpdate}:{milestones:Milestone[];onSave:(m:Milestone)=>void;onUpdate:(m:Milestone)=>void;}){const[form,setForm]=useState<Milestone>({id:"new",date:"",type:"Initiation",notes:""});return(<div className="space-y-4"><SectionCard title="Add milestone"><form className="grid grid-cols-1 sm:grid-cols-2 gap-3" onSubmit={e=>{e.preventDefault();onSave({...form,id:crypto.randomUUID() as any});setForm({id:"new",date:"",type:"Initiation",notes:""});}}><label className="flex flex-col gap-1 text-sm"><span className="font-medium">Date</span><input type="date" value={form.date} onChange={e=>setForm({...form,date:e.target.value})} className="w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:ring-2 focus:ring-blue-600" required/></label><label className="flex flex-col gap-1 text-sm"><span className="font-medium">Type</span><select value={form.type} onChange={e=>setForm({...form,type:e.target.value as Milestone["type"]})} className="w-full rounded-lg border border-gray-300 px-3 py-2 text-sm focus:ring-2 focus:ring-blue-600"><option>Initiation</option><option>Passing</option><option>Raising</option><option>Installation</option><option>50 Year</option><option>60 Year</option><option>Other</option></select></label><label className="flex flex-col gap-1 text-sm sm:col-span-2"><span className="font-medium">Notes</span><textarea value={form.notes} onChange={e=>setForm({...form,notes:e.target.value})} className="w-full rounded-lg border border-gray-300 px-3 py-2 text-sm min-h-[88px] focus:ring-2 focus:ring-blue-600" placeholder="Optional"/></label><div className="sm:col-span-2 flex justify-end gap-2"><button type="reset" onClick={()=>setForm({id:"new",date:"",type:"Initiation",notes:""})} className="px-3 py-2 rounded-lg border">Clear</button><button type="submit" className="px-3 py-2 rounded-lg bg-blue-600 text-white">Add milestone</button></div></form></SectionCard><SectionCard title="Milestones"><ul className="space-y-2">{milestones.map(m=>(<li key={m.id} className="rounded-lg border border-gray-200 bg-white"><details><summary className="px-3 py-2 cursor-pointer">{m.type}<span className="text-xs text-gray-600 ml-2">{m.date}</span></summary><div className="border-t px-3 py-3 text-sm">{m.notes||"No notes"}<div className="mt-3 flex justify-end"><button className="px-3 py-2 rounded-lg border" onClick={e=>{e.preventDefault();onUpdate(m);}}>Edit</button></div></div></details></li>))}{milestones.length===0&&<li className="text-gray-500">No milestones yet</li>}</ul></SectionCard></div>)}
